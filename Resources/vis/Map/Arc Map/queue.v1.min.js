(function () {
	function a(a) {
		function n() {
			for (; p = k < e.length && a > l;) {
				var f = k++, b = e[f], c = q.call(b, 1);
				c.push(r(f));
				++l;
				b[0].apply(null, c)
			}
		}
		function r(f) {
			return function (a, d) {
				--l;
				null == b && (null != a ? (b = a, k = c = 0 / 0, g()) : (e[f] = d, --c ? p || n() : g()))
			}
		}
		function g() {
			null != b ? d(b) : m ? d(b, e) : d.apply(null, [b].concat(e))
		}
		var h, p, m, e = [], k = 0, l = 0, c = 0, b = null, d = s;
		return a || (a = 1 / 0), h = {
			defer: function () {
				return b || (e.push(arguments), ++c, n()), h
			}, await: function (a) {
				return d = a, m = !1, c || g(), h
			}, awaitAll: function (a) {
				return d = a, m = !0, c || g(), h
			}
		}
	}
	function s() {
	}
	"undefined" == typeof module ? self.queue = a : module.exports = a;
	a.version = "1.0.4";
	var q = [].slice
})();